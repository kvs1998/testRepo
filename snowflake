CREATE TABLE YOUR_DB.YOUR_SCHEMA.T_DYNAMIC_TABLE_TRACKING (
    ID NUMBER AUTOINCREMENT, -- Incremental ID for tracking record
    DATABASE_NAME TEXT NOT NULL,
    SCHEMA_NAME TEXT NOT NULL,
    TABLE_NAME TEXT NOT NULL,
    QUALIFIED_NAME TEXT AS (DATABASE_NAME || '.' || SCHEMA_NAME || '.' || TABLE_NAME) UNIQUE, -- Auto-generate and ensure uniqueness
    
    -- Tracking Flags for specific data types
    TRACK_REFRESH_HISTORY BOOLEAN DEFAULT TRUE, -- Collects from DYNAMIC_TABLE_REFRESH_HISTORY
    TRACK_METADATA_SNAPSHOT BOOLEAN DEFAULT FALSE, -- Collects from DYNAMIC_TABLES (current state)
    TRACK_GRAPH_HISTORY BOOLEAN DEFAULT FALSE, -- Placeholder if you later want to collect from DYNAMIC_TABLE_GRAPH_HISTORY
    
    IS_ACTIVE BOOLEAN DEFAULT TRUE, -- Set to FALSE to disable tracking for a table

    -- Collection Parameters for DYNAMIC_TABLE_REFRESH_HISTORY
    COLLECT_REFRESH_HISTORY_DAYS NUMBER DEFAULT 7, -- P_COLLECT_FROM_LAST_DAYS for refresh history

    -- Collection Parameters for DYNAMIC_TABLES (Metadata Snapshot)
    -- This collection currently has no explicit date range, so 'DAYS' here is more conceptual for logging.
    -- DYNAMIC_TABLES by default shows within 7 days, if not specified.
    COLLECT_METADATA_DAYS NUMBER DEFAULT 7, 

    -- Audit and Status for REFRESH_HISTORY collection
    LAST_REFRESH_HISTORY_COLLECTION_TIMESTAMP TIMESTAMP_NTZ,
    LAST_REFRESH_HISTORY_COLLECTION_STATUS TEXT, -- SUCCESS / FAILED
    LAST_REFRESH_HISTORY_COLLECTION_MESSAGE TEXT,

    -- Audit and Status for METADATA_SNAPSHOT collection
    LAST_METADATA_COLLECTION_TIMESTAMP TIMESTAMP_NTZ,
    LAST_METADATA_COLLECTION_STATUS TEXT,
    LAST_METADATA_COLLECTION_MESSAGE TEXT,

    CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP(),
    UPDATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()
);
